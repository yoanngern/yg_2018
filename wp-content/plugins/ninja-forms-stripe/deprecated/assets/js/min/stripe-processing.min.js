function stripeResponseHandler(e,r){var i=jQuery(document).data("stripe_form_id"),a=i.replace("ninja_forms_form_",""),d=jQuery("#"+i);if(r.error){var n=r.error.param.replace("_","-");jQuery(".ninja-forms-credit-card-"+n+"-error").html(r.error.message).parent().addClass("ninja-forms-error"),jQuery(":submit").attr("disabled",!1),jQuery("#nf_processing_"+a).hide(),jQuery("#nf_submit_"+a).show(),jQuery(document).triggerHandler("stripeError",r.error)}else{var s=r.id;jQuery(d).append('<input type="hidden" name="_stripe_token" id="stripe_token_'+a+'" value="'+s+'"/>'),jQuery(":submit").attr("disabled",!1),jQuery(d).submit()}jQuery("#stripe_token_"+a).val(null)}Stripe.setPublishableKey(stripe_vars.publishable_key),jQuery(document).ready(function(e){e(document).on("beforeSubmit.stripe",function(r,i,a,d){var n=e(a).prop("id").replace("ninja_forms_form_","");if("undefined"==typeof e("#stripe_token_"+n).val()&&"submit"==e(document).data("submit_action")){var s=window["ninja_forms_form_"+n+"_settings"].stripe;if(1==s){ninja_forms_default_before_submit(i,a,d),e(":submit").attr("disabled","disabled"),e(document).data("stripe_form_id",e(a).prop("id")),jQuery("#nf_submit_"+n).hide(),jQuery("#nf_processing_"+n).show();var t=e("#ninja_forms_form_"+n),o=t.find(".card-number").parent().parent().data("visible");return o?(Stripe.createToken({name:t.find(".card-name").val(),number:t.find(".card-number").val(),cvc:t.find(".card-cvc").val(),exp_month:t.find(".card-expiry-month").val(),exp_year:t.find(".card-expiry-year").val(),address_line1:t.find(".billing-address.address1").val(),address_line2:t.find(".billing-address.address2").val(),address_city:t.find(".billing-address.city").val(),address_state:t.find(".billing-address.state").val(),address_zip:t.find(".billing-address.zip").val(),address_country:t.find(".billing-address.country").val()},stripeResponseHandler),!1):!0}return!0}})});